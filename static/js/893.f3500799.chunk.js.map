{"version":3,"file":"static/js/893.f3500799.chunk.js","mappings":"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","sources":["components/Uploader.js","components/Tips.js","pages/Home.js"],"sourcesContent":["import React, { useRef } from 'react';\r\nimport { useStores } from '../stores';\r\nimport { observer, useLocalStore } from 'mobx-react';\r\nimport { Upload, message, Spin } from 'antd';\r\nimport { InboxOutlined } from '@ant-design/icons';\r\nimport styled from 'styled-components';\r\n\r\nconst { Dragger } = Upload;\r\n\r\n\r\nconst Result = styled.div`\r\n  margin-top: 30px;\r\n  border: 1px dashed #ccc;\r\n  padding: 20px;\r\n`;\r\nconst H1 = styled.h1`\r\n  margin: 20px 0;\r\n  text-align: center;\r\n`;\r\nconst Image = styled.img`\r\n  max-width: 300px;\r\n`;\r\n\r\n\r\n\r\nconst Component = observer(() => {\r\n  const { ImageStore, UserStore } = useStores();\r\n  const ref1 = useRef();\r\n  const ref2 = useRef();\r\n\r\n  const store = useLocalStore(() => ({\r\n    width: null,\r\n    setWidth(width) {\r\n      store.width = width;\r\n    },\r\n    get widthStr() {\r\n      return store.width ? `/w/${store.width}` : '';\r\n    },\r\n    height: null,\r\n    setHeight(height) {\r\n      store.height = height;\r\n    },\r\n    get heightStr() {\r\n      return store.height ? `/h/${store.height}` : '';\r\n    },\r\n    get fullStr() {\r\n      //?imageView2/0/w/800/h/400)\r\n      return ImageStore.serverFile.attributes.url.attributes.url + '?imageView2/0' + store.widthStr + store.heightStr\r\n    }\r\n\r\n  }));\r\n\r\n  const bindWidthChange = () => {\r\n    console.log('bindWidthChange...')\r\n    console.log(ref1.current.value)\r\n    store.setWidth(ref1.current.value);\r\n  };\r\n\r\n  const bindHeightChange = () => {\r\n    store.setHeight(ref2.current.value);\r\n  };\r\n\r\n  const props = {\r\n    showUploadList: false,\r\n    beforeUpload: file => {\r\n      ImageStore.setFile(file);\r\n      ImageStore.setFilename(file.name);\r\n      if (UserStore.currentUser === null) {\r\n        message.warning('请先登录再上传！');\r\n        return false;\r\n      }\r\n      window.file = file\r\n      if (!/(svg$)|(png$)|(jpg$)|(jpeg$)|(gif$)/ig.test(file.type)) {\r\n        message.error('只能上传png/svg/jpg/gif格式的图片');\r\n        return false;\r\n      }\r\n      if (file.size > 1024 * 1024) {\r\n        message.error('图片最大1M');\r\n        return false;\r\n      }\r\n\r\n      ImageStore.upload()\r\n        .then((serverFile) => {\r\n          console.log('上传成功')\r\n          console.log(serverFile);\r\n        }).catch(() => {\r\n          console.log('上传失败')\r\n        });\r\n      return false;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Spin tip=\"上传中\" spinning={ImageStore.isUpoading}>\r\n        <Dragger {...props}>\r\n          <p className=\"ant-upload-drag-icon\">\r\n            <InboxOutlined />\r\n          </p>\r\n          <p className=\"ant-upload-text\">点击或者拖拽上传图片</p>\r\n          <p className=\"ant-upload-hint\">\r\n            仅支持.png/.gif/.jpg/.svg格式的图片，图片最大1M\r\n    </p>\r\n        </Dragger>\r\n      </Spin>\r\n      {\r\n        ImageStore.serverFile ? <Result>\r\n          <H1>上传结果</H1>\r\n          <dl>\r\n            <dt>线上地址</dt>\r\n            <dd><a target=\"_blank\" href={ImageStore.serverFile.attributes.url.attributes.url}>{ImageStore.serverFile.attributes.url.attributes.url}</a></dd>\r\n            <dt>文件名</dt>\r\n            <dd>{ImageStore.filename}</dd>\r\n            <dt>图片预览</dt>\r\n            <dd>\r\n              <Image src={ImageStore.serverFile.attributes.url.attributes.url} />\r\n            </dd>\r\n            <dt>更多尺寸</dt>\r\n            <dd>\r\n              <input ref={ref1} onChange={bindWidthChange} placeholder=\"最大宽度（可选）\" />\r\n              <input ref={ref2} onChange={bindHeightChange} placeholder=\"最大高度（可选）\" />\r\n            </dd>\r\n            <dd>\r\n              <a target=\"_blank\" href={store.fullStr}>{store.fullStr}</a>\r\n            </dd>\r\n          </dl>\r\n        </Result> : null\r\n      }\r\n    </div>\r\n  );\r\n});\r\nexport default Component;","import React from 'react';\r\nimport { useStores } from '../stores';\r\nimport { observer } from 'mobx-react';\r\nimport styled from 'styled-components';\r\n\r\nconst Tips = styled.div`\r\n  background: orange;\r\n  padding: 10px;\r\n  margin: 30px 0;\r\n  color: #fff;\r\n  border-radius: 4px;\r\n`;\r\n\r\nconst Component = observer(({ children }) => {\r\n  const { UserStore } = useStores();\r\n  return (\r\n    <>\r\n      {\r\n        UserStore.currentUser ? null : <Tips>{children}</Tips>\r\n      }\r\n    </>\r\n  );\r\n});\r\n\r\nexport default Component;","import React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { useStores } from '../stores';\r\nimport Uploader from '../components/Uploader';\r\nimport Tips from '../components/Tips';\r\n\r\nconst Home = observer(() => {\r\n  const { UserStore } = useStores();\r\n\r\n  const User = () => <div>Hello {UserStore.currentUser.attribures.username} </div>\r\n\r\n  return (\r\n    <>\r\n        <Tips>请先登录再上传!</Tips>\r\n      \r\n      <Uploader />\r\n    </>\r\n  );\r\n});\r\n\r\nexport default Home;"],"names":["Dragger","Upload","Result","styled","div","_templateObject","_taggedTemplateLiteral","H1","h1","_templateObject2","Image","img","_templateObject3","observer","_useStores","useStores","ImageStore","UserStore","ref1","useRef","ref2","store","useLocalStore","width","setWidth","widthStr","concat","height","setHeight","heightStr","fullStr","serverFile","attributes","url","props","showUploadList","beforeUpload","file","setFile","setFilename","name","currentUser","message","warning","window","test","type","size","error","upload","then","console","log","catch","_jsxs","children","_jsx","Spin","tip","spinning","isUpoading","_objectSpread","className","InboxOutlined","target","href","filename","src","ref","onChange","current","value","placeholder","Tips","_ref","_Fragment","Uploader"],"sourceRoot":""}